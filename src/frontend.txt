/* ==========================================================
     ðŸ“¥ GET - All Teams (Vendor Wise)
     @route GET /miscellaneous-master/team/vendor/:vendor_id
     ========================================================== */
  export const getMiscTeams = async (vendorId: number): Promise<MiscTeam[]> => {
    const { data } = await apiClient.get(
      `/miscellaneous-master/team/vendor/${vendorId}`
    );
  
    return data?.data || [];
  }; <- use this to get responsible teams

similar api / hook we need to create eg of it :-

/* ==========================================================
   ðŸ”¹ 1ï¸âƒ£ Move Lead to Under Installation Stage
   @route PUT /leads/installation/under-installation/vendorId/:vendorId/leadId/:leadId/move-to-under-installation
   ========================================================== */
export const moveLeadToUnderInstallation = async (
  vendorId: number,
  leadId: number,
  updated_by: number
) => {
  const { data } = await apiClient.put(
    `/leads/installation/under-installation/vendorId/${vendorId}/leadId/${leadId}/move-to-under-installation`,
    { updated_by }
  );
  return data?.data;
};

/**
 * âœ… React Query Mutation Hook â€” Move Lead to Under Installation Stage
 */
export const useMoveLeadToUnderInstallation = () => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: ({
      vendorId,
      leadId,
      updated_by,
    }: {
      vendorId: number;
      leadId: number;
      updated_by: number;
    }) => moveLeadToUnderInstallation(vendorId, leadId, updated_by),

    onSuccess: (data) => {
      toast.success("Lead successfully moved to Under Installation stage");
      // ðŸ”„ Refresh any affected lists (e.g., dispatch or under-installation leads)
      queryClient.invalidateQueries({
        queryKey: ["leadStats"],
      });
    },

    onError: (error: any) => {
      toast.error(
        error?.response?.data?.message ||
          "Failed to move lead to Under Installation stage"
      );
    },
  });
};

tabs

"use client";

import React from "react";
import SmoothTab from "@/components/kokonutui/smooth-tab";
import UnderInstallationDetails from "./UnderInstallationDetails";
import { useUnderInstallationDetails } from "@/api/installation/useUnderInstallationStageLeads";
import { useAppSelector } from "@/redux/store";
import InstallationMiscellaneous from "./InstallationMiscellaneous";
import InstallationIssueLog from "./InstallationIssueLog";

export default function UnderInstallationTabsWrapper({
  leadId,
  accountId,
  name,
}: {
  leadId: number;
  accountId?: number;
  name?: string;
}) {
  const vendorId = useAppSelector((s) => s.auth.user?.vendor_id) || 0;
  const account_id = accountId || 0;

  // ðŸ”¹ Fetch installation details (to check start date)
  const { data: underDetails } = useUnderInstallationDetails(vendorId, leadId);

  const installationStarted = !!underDetails?.actual_installation_start_date;

  const tabs = [
    {
      id: "underInstallation",
      title: "Under Installation",
      color: "bg-blue-500 hover:bg-blue-600",
      disabled: !installationStarted, // always accessible
      disabledReason: installationStarted
        ? ""
        : "Start installation to access this section",
      cardContent: (
        <UnderInstallationDetails
          leadId={leadId}
          accountId={accountId}
          name={name}
        />
      ),
    },

    {
      id: "misc",
      title: "Miscellaneous",
      color: "bg-gray-400",
      disabled: !installationStarted,
      disabledReason: "Start installation to access this section",
      cardContent: (
        <InstallationMiscellaneous
          vendorId={vendorId}
          leadId={leadId}
          accountId={account_id}
        />
      ),
    },

    {
      id: "issueLog",
      title: "Issue Log",
      color: "bg-red-500 hover:bg-red-600", // Changed to red
      disabled: !installationStarted,
      disabledReason: installationStarted
        ? ""
        : "Start installation to access this section",
      cardContent: (
        <InstallationIssueLog
          vendorId={vendorId}
          leadId={leadId}
          accountId={account_id}
        />
      ),
    },

    {
      id: "handover",
      title: "Usable Handover",
      color: "bg-gray-400",
      disabled: !installationStarted, // ðŸš« disabled until installation starts
      disabledReason: installationStarted
        ? "Still yet to come âœ¨"
        : "Start installation to access this section",
      cardContent: (
        <div className="flex items-center justify-center h-full text-muted-foreground">
          Usable Handover section is coming soon...
        </div>
      ),
    },
  ];

  return (
    <div className="w-full h-full">
      <SmoothTab
        items={tabs}
        defaultTabId="underInstallation"
        activeColor="bg-blue-500"
        contentHeightClass="h-[130vh]"
      />
    </div>
  );
}
